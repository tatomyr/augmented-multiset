<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Radix?
/**
 * The nAry lib provides methods to deal with n-ary vectors.
 * You can think of them as of base-n numbers but with fixed length.
 * Those vectors could help to linearize nested loops
 * (especially it's helpful when an amount of subsidiaries is not specified beforehand).
 * To use this library features you have to type something like 'nAry(base)(length).someMethod(parameters)'
 *
 * @param {number} base - The base (or radix or arity in another words) of vector.
 * @param {number} length - Amount of digits of vector.
 */
const nAry = (base = 2) => (length = 0) => {
  /**
   * Max value of each digit.
   */
  const range = base - 1;

  /**
   * Zero vector.
   */
  const zero = Array(length).fill(0);

  /**
   * The last vector.
   */
  const last = Array(length).fill(range);

  /**
   * A random vector.
   */
  const random = () => zero.map(() => Math.floor(Math.random() * base));

  /**
   * A (base)-ary incrementation of a (vector)
   *
   * If you do not specify the (length) parameter in closure function,
   * the increment of the last vector returns an empty vector. ('[]').
   * Otherwise it returns a zero vector.
   *
   * @param {array} vector - A vector to be incremented.
   */
  const inc = (vector) => {
    const index = vector.findIndex(digit => digit &lt; range);
    return index === -1 ? (
      zero
    ) : [
      ...Array(index).fill(0),
      vector[index] + 1,
      ...vector.filter((_, i) => i > index)
    ];
  }

  /**
   * Brute force.
   */
  const all = () => {
    const vectors = [zero];
    for (let i = 1; i &lt; Math.pow(base, length); i++) {
      vectors.push(inc(vectors[i - 1]));
    }
    return vectors;
  }

  /**
   * Generates just the (base)-ary verge of the (length)-dimension table.
   */
  // const verge = length => {
  //   const vectors = [last(length)];
  //   for (let i = 1; i &lt; Math.pow(base, length) - Math.pow(range, length); i++) {
  //     const vector = inc(vectors[i - 1]);
  //
  //     console.log(Math.pow(base, length) - Math.pow(range, length), vector);
  //
  //     if (vector.some(digit => digit === range)) vectors.push(vector);
  //   }
  //   return vectors;
  // }
  const verge = () => all().filter(vector => vector.some(digit => digit === range));

  /**
   * Set of (count) random vectors.
   *
   * @param {number} count - Count of vectors to output.
   */
  const randomSet = count => Array(count).fill().map(() => random());

  /**
   * Converts (base)-ary vector as a number to decimal.
   */
  const index = vector => vector.reduce((sum, item, i) => sum + item * Math.pow(base, i), 0);

  /**
   * Coerces base-10 number to (base)-ary (length)-large vector.
   *
   * @param {number} value - Decimal number to convert.
   */
  const fromDecimal = (value = 0) => Array(value).fill().reduce(prev => inc(prev), zero);

  const sumOfDigits = vector => vector.reduce((sum, item) => sum + +item, 0);

  /**
   * Returns all vectors with specified sum of digits value.
   *
   * @param {number} value - Decimal number, which the sum of digits must be equals to.
   */
  const sumEquals = value => all().filter(vector => sumOfDigits(vector) === value);

  /**
   * Generates chunks of datasets.
   */
  // const chunk = maxChunkCount => ...

  return {
    base,
    length,
    range,
    zero,
    last,
    random,
    inc,
    all,
    verge,
    randomSet,
    index,
    fromDecimal,
    sumOfDigits,
    sumEquals,
  };
}

module.exports = nAry;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#nAry">nAry</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Jun 24 2017 23:34:28 GMT+0300 (EEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
